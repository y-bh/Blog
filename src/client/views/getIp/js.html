<!--
 * @Author: 陈昊天
 * @LastEditors: 陈昊天
 * @description: 提取IP JS部分
 * @Date: 2022-05-09 10:29:23
 * @LastEditTime: 2022-05-10 11:34:57
-->
<script>
$(function() {
  const extractIp = [
    {
      title: 'API获取',
    },
    {
      title: '提取接口',
    },
    {
      title: '白名单接口',
    },
    {
      title: '错误码'
    }
  ]

  const codeDemo = [
    {
      title: 'Python语言'
    },
    {
      title: 'GO语言'
    },
    {
      title: 'JavaScript语言'
    },
    {
      title: 'Java语言'
    },
    {
      title: 'Kotlin语言'
    },
    {
      title: 'Php语言'
    },
    {
      title: '易语言'
    },
    {
      title: 'C语言'
    },
    {
      title: 'Phantomjs语言'
    },
    {
      title: 'Selenium语言'
    },
    {
      title: 'Node语言'
    },
  ]

  const paidList = [
    {
      id: 1,
      desc: '已购套餐1'
    },
    {
      id: 2,
      desc: '已购套餐2'
    }
  ]

  const mealBox = [
    {
      desc: '3分钟的IP',
      num: '40,000',
    },
    {
      desc: '5分钟的IP',
      num: '20,000',
    },
    {
      desc: '10分钟的IP',
      num: '11,111',
    },
    {
      desc: '15分钟的IP',
      num: '6,666',
    },
    {
      desc: '1~5分钟的IP',
      num: '40,000',
    },
    {
    desc: '5~25分钟的IP',
      num: '20,000',
    },
    {
      desc: '25分钟~3小时的IP',
      num: '20,000',
    },
    {
      desc: '3~6小时的IP',
      num: '11,111',
    },
    {
      desc: '6~12小时的IP',
      num: '6,666',
    },
    {
      desc: '12~24小时的IP',
      num: '40,000',
    },
  ]

  const ipUse = [
    {
      time: '3分钟',
      deal: '5天启币/IP'
    },
    {
      time: '5分钟',
      deal: '10天启币/IP'
    },
    {
      time: '10分钟',
      deal: '18天启币/IP'
    },
    {
      time: '15分钟',
      deal: '30天启币/IP'
    },
  ]

  //列表渲染-提取IP
  $.each(extractIp,(index,item) => {
    $('.anchor').append(`<span class="pointer">${item.title}<span>`)
  })

  //列表渲染-代码demo
  $.each(codeDemo,(index,item) => {
    $('.demo').append(`<span class="pointer">${item.title}<span>`)
  })

  //点击定位
  $('.anchor span').on('click', function() {
    let currentAnchor = $('.right .head').eq($(this).index()).offset().top
    $('body,html').stop().animate({
      scrollTop: currentAnchor
    })
  })
  $('.demo span').on('click', function() {  //代码demo定位
    let currentDemo = $('.right div').last($(this).index()).offset().top
    $('body,html').stop().animate({
      scrollTop: currentDemo
    })
  })

  //select渲染
  $.each(paidList,(index,item) => {
    $('.extract_select').append(`<option>${item.desc}</option>`)
  })

  //ip数量列表渲染
  $.each(mealBox,(index,item) => {
    $('.meal_box').append(`<div class="meal_item grid justify-center align-center">
        <div class="desc flex justify-center pt-10 pb-10">
          <span class="font-15">${item.desc}</span>
        </div>
        <div class="num flex justify-center align-center">
          <span class="text-blue font-25">${item.num}</span>
          <span class="text-blue font-15">个</span>
        </div>
      </div>`)
  })

  //ip套餐列表渲染
  $.each(ipUse,(index,item) => {
    $('.ip_use_box').append(`<div class="ip_use_item flex flex-column align-center justify-center">
        <div class="time_box">
          <span class="time_text font-25 font-bold main-title-color">${item.time}</span>
        </div>
        <div class="deal_box mt-15 pt-10 flex justify-center align-center pb-10 ">
          <span class="deal_text text-blue">${item.deal}</span>  
        </div>
      </div>`)
  })

  //点击IP使用时长
  $('.ip_use_box .ip_use_item').on('click',function() {
    $(this).toggleClass('ip_use_item_choose')
    $(this).find('.time_text').toggleClass('time_text_choose','font-25','font-bold','main-title-color')
    $(this).find('.deal_text').toggleClass('deal_text_choose','text-blue')
  })

  //提取数量
  const changeIpNum = (val,btn) => {
    let num = Number(val)
    if (btn === 'decrement' && val <= 1) {  //点击"-"并且数值为1
      alert('单次最小提取量为1')
      return null
    } else {
      if (btn === 'decrement') {
        num-=5;
        return num;
      } else {
        num+=5;
        return num;
      }
    }
  }
  
  $('.decrement,.increment').on('click',function() {
    let currentVal = $(this).siblings('.extract_num_input').val() //获取input值
    let currentEl = $(this).attr('class') //获取当前类名
    let newVal = changeIpNum(currentVal,currentEl)
    if (newVal !== null) {  //判断是否逻辑正确
      $(this).siblings('.extract_num_input').val(newVal)
    }
  })
})
</script>